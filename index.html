<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Nic Huzz | Links</title>
  <meta name="description" content="On a mission to make healing fun">
  <meta property="og:title" content="Nic Huzz | Links">
  <meta property="og:description" content="On a mission to make healing fun">
  <meta property="og:type" content="profile">
  <meta property="og:image" content="assets/profile.jpg">
  <meta name="twitter:card" content="summary">
  <link rel="icon" type="image/jpeg" href="assets/profile.jpg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-top: #c4b5f0;
      --bg-mid: #6c3bf5;
      --bg-bottom: #3a0f98;
      --accent: #FFD700;
      --name-color: #FFD700;
      --bio-color: #ffffff;
      --card-bg: #ffffff;
      --card-text: #1a1a1a;
      --card-radius: 12px;
      --card-hover-scale: 1.03;
      --section-title-color: #FFD700;
      --social-icon-color: #FFD700;
      --font: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    html {
      -webkit-text-size-adjust: 100%;
    }

    body {
      font-family: var(--font);
      min-height: 100vh;
      min-height: 100dvh;
      background: linear-gradient(180deg, var(--bg-top) 0%, var(--bg-mid) 35%, var(--bg-bottom) 100%);
      background-attachment: fixed;
      display: flex;
      justify-content: center;
      padding: 0 16px 40px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .container {
      width: 100%;
      max-width: 680px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Profile Section */
    .profile {
      text-align: center;
      padding-top: 20px;
      margin-bottom: 28px;
      width: 100%;
    }

    .avatar-hero {
      width: 100%;
      max-width: 400px;
      margin: 0 auto 12px;
      display: block;
    }

    .avatar-hero img {
      width: 100%;
      height: auto;
      display: block;
      filter: drop-shadow(0 12px 40px rgba(0, 0, 0, 0.25));
      animation: heroIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) both;
    }

    .avatar-circle {
      width: 120px;
      height: 120px;
      margin: 0 auto 16px;
      border-radius: 50%;
      overflow: hidden;
      border: 3px solid rgba(255, 255, 255, 0.25);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      animation: avatarIn 0.7s cubic-bezier(0.16, 1, 0.3, 1) both;
    }

    .avatar-circle img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .profile-name {
      font-size: 28px;
      font-weight: 800;
      color: var(--name-color);
      letter-spacing: -0.02em;
      margin-bottom: 6px;
      animation: fadeSlideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) 0.15s both;
    }

    .profile-bio {
      font-size: 16px;
      font-weight: 400;
      color: var(--bio-color);
      opacity: 0.9;
      line-height: 1.5;
      margin-bottom: 16px;
      animation: fadeSlideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) 0.25s both;
    }

    /* Social Icons */
    .social-row {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 8px;
      animation: fadeSlideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) 0.35s both;
    }

    .social-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: 2px solid var(--social-icon-color);
      color: var(--social-icon-color);
      text-decoration: none;
      transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .social-icon:hover {
      background: var(--social-icon-color);
      color: var(--bg-mid);
      transform: scale(1.12);
    }

    .social-icon svg {
      width: 22px;
      height: 22px;
      fill: currentColor;
    }

    /* Links */
    .links-container {
      width: 100%;
    }

    .section-title {
      text-align: center;
      color: var(--section-title-color);
      font-size: 18px;
      font-weight: 700;
      margin: 28px 0 14px;
      letter-spacing: -0.01em;
    }

    .link-card {
      display: flex;
      align-items: center;
      background: var(--card-bg);
      border-radius: var(--card-radius);
      padding: 0;
      margin-bottom: 12px;
      text-decoration: none;
      color: var(--card-text);
      transition: transform 0.25s cubic-bezier(0.16, 1, 0.3, 1),
                  box-shadow 0.25s cubic-bezier(0.16, 1, 0.3, 1);
      cursor: pointer;
      overflow: hidden;
      min-height: 56px;
      position: relative;
    }

    .link-card:hover {
      transform: scale(var(--card-hover-scale));
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.18);
    }

    .link-card:active {
      transform: scale(0.98);
    }

    .link-thumb {
      width: 56px;
      height: 56px;
      object-fit: cover;
      flex-shrink: 0;
      border-radius: var(--card-radius) 0 0 var(--card-radius);
    }

    .link-title {
      flex: 1;
      text-align: center;
      font-size: 15px;
      font-weight: 500;
      padding: 14px 20px;
      line-height: 1.3;
    }

    .link-card.has-thumb .link-title {
      text-align: left;
      padding-left: 16px;
    }

    /* Animations */
    @keyframes heroIn {
      from {
        opacity: 0;
        transform: scale(0.9) translateY(12px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    @keyframes avatarIn {
      from {
        opacity: 0;
        transform: scale(0.8);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes fadeSlideUp {
      from {
        opacity: 0;
        transform: translateY(16px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .link-animate {
      opacity: 0;
      transform: translateY(16px);
    }

    .link-animate.visible {
      animation: fadeSlideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) both;
    }

    /* Footer */
    .footer {
      margin-top: 40px;
      text-align: center;
      color: rgba(255, 255, 255, 0.4);
      font-size: 12px;
    }

    /* Animated gradient */
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    body.animated-bg {
      background-size: 200% 200% !important;
      animation: gradientShift 12s ease infinite;
    }

    /* Ripple effect */
    .link-card {
      overflow: hidden;
    }

    .ripple-circle {
      position: absolute;
      border-radius: 50%;
      background: rgba(108, 59, 245, 0.12);
      transform: scale(0);
      animation: rippleExpand 0.6s ease-out forwards;
      pointer-events: none;
      width: 20px;
      height: 20px;
      margin: -10px 0 0 -10px;
    }

    @keyframes rippleExpand {
      to {
        transform: scale(15);
        opacity: 0;
      }
    }

    /* Social + Share row */
    .social-share-row {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 12px;
      animation: fadeSlideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) 0.35s both;
    }

    /* Share button */
    .share-row {
      display: flex;
      justify-content: center;
      margin-top: 12px;
      animation: fadeSlideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) 0.45s both;
    }

    .share-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 10px 22px;
      border-radius: 24px;
      border: 2px solid rgba(255,255,255,0.2);
      background: rgba(255,255,255,0.08);
      color: rgba(255,255,255,0.8);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      font-family: var(--font);
    }

    .share-btn:hover {
      background: rgba(255,255,255,0.15);
      border-color: rgba(255,255,255,0.35);
      color: #fff;
      transform: scale(1.05);
    }

    .share-btn:active {
      transform: scale(0.97);
    }

    .share-btn svg {
      width: 16px;
      height: 16px;
      fill: currentColor;
    }

    .share-toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%) translateY(80px);
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 10px 20px;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 500;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      transition: transform 0.35s cubic-bezier(0.16, 1, 0.3, 1);
      z-index: 100;
      pointer-events: none;
    }

    .share-toast.visible {
      transform: translateX(-50%) translateY(0);
    }

    /* Preloader */
    .preloader {
      position: fixed;
      inset: 0;
      background: linear-gradient(180deg, var(--bg-top), var(--bg-mid));
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }

    .preloader.fade-out {
      opacity: 0;
      visibility: hidden;
    }

    .preloader-spinner {
      width: 32px;
      height: 32px;
      border: 3px solid rgba(255,255,255,0.12);
      border-top-color: rgba(255,255,255,0.8);
      border-radius: 50%;
      animation: spin 0.65s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ====== Essence Overlay (shared by intro, swipe, battle, reveal) ====== */
    .essence-overlay {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, #4a0ea8 0%, #5e17eb 50%, #7c3aed 100%);
      z-index: 900;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      overflow-y: auto;
      transition: opacity 0.6s ease, visibility 0.6s ease;
    }
    .essence-overlay.hidden {
      opacity: 0; visibility: hidden; pointer-events: none;
    }

    /* --- Intro screen --- */
    .ei-inner { max-width: 480px; width: 100%; text-align: center; display: flex; flex-direction: column; align-items: center; }
    .ei-sparkle { font-size: 48px; margin-bottom: 16px; animation: essencePulse 2.5s ease-in-out infinite; }
    @keyframes essencePulse { 0%,100%{transform:scale(1);opacity:1} 50%{transform:scale(1.15);opacity:.85} }
    .ei-title { font-size: 28px; font-weight: 800; background: linear-gradient(135deg,#ffdd27,#f59e0b,#d97706); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; letter-spacing: -.02em; margin-bottom: 24px; opacity:0; animation: fadeSlideUp .7s cubic-bezier(.16,1,.3,1) .2s both; }
    .ei-text { font-size: 16px; line-height: 1.7; color: rgba(255,255,255,.85); margin-bottom: 16px; opacity:0; font-weight: 700; }
    .ei-text:nth-child(3){animation:fadeSlideUp .7s cubic-bezier(.16,1,.3,1) .4s both}
    .ei-text:nth-child(4){animation:fadeSlideUp .7s cubic-bezier(.16,1,.3,1) .6s both}
    .ei-text:nth-child(5){animation:fadeSlideUp .7s cubic-bezier(.16,1,.3,1) .8s both}
    .ei-text:nth-child(6){animation:fadeSlideUp .7s cubic-bezier(.16,1,.3,1) 1s both}
    .ei-text strong { color: #E9A23B; }
    .ei-hint { font-size: 14px; color: rgba(255,255,255,.5); font-style: italic; margin: 8px 0 32px; opacity:0; animation: fadeSlideUp .7s cubic-bezier(.16,1,.3,1) 1.2s both; }
    .ei-cta { display: inline-flex; align-items: center; justify-content: center; padding: 16px 48px; border-radius: 32px; border: none; background: linear-gradient(135deg,#ffdd27,#f59e0b,#d97706); color: #2d0a5a; font-size: 17px; font-weight: 700; font-family: var(--font); cursor: pointer; transition: transform .25s cubic-bezier(.16,1,.3,1), box-shadow .25s; box-shadow: 0 4px 24px rgba(233,162,59,.35); text-decoration: none; opacity:0; animation: fadeSlideUp .7s cubic-bezier(.16,1,.3,1) 1.4s both; width: 100%; max-width: 320px; }
    .ei-cta:hover { transform: scale(1.05); box-shadow: 0 8px 32px rgba(233,162,59,.5); }
    .ei-cta:active { transform: scale(.97); }
    .ei-skip { margin-top: 20px; display: inline-flex; align-items: center; justify-content: center; padding: 16px 48px; border-radius: 32px; border: 2px solid rgba(255,255,255,.25); background: rgba(255,255,255,.08); color: rgba(255,255,255,.6); font-size: 17px; font-weight: 600; cursor: pointer; font-family: var(--font); transition: all .25s cubic-bezier(.16,1,.3,1); text-decoration: none; opacity:0; animation: fadeSlideUp .7s cubic-bezier(.16,1,.3,1) 1.6s both; width: 100%; max-width: 320px; }
    .ei-skip:hover { background: rgba(255,255,255,.15); border-color: rgba(255,255,255,.4); color: rgba(255,255,255,.8); }

    /* --- Swipe phase --- */
    .swipe-phase { width: 100%; max-width: 400px; display: flex; flex-direction: column; align-items: center; height: 100%; max-height: 100dvh; justify-content: center; padding: 10px 0; }
    .swipe-instruction { text-align: center; color: white; font-size: 14px; font-style: italic; margin-bottom: 6px; }
    .swipe-hint { display: flex; align-items: center; justify-content: center; gap: 8px; color: rgba(255,255,255,.8); font-size: 14px; margin-bottom: 6px; animation: hintPulse 1.5s ease-in-out infinite; }
    @keyframes hintPulse { 0%,100%{opacity:.6} 50%{opacity:1} }
    .swipe-hint-arrow { font-size: 24px; animation: hintArrow 1.5s ease-in-out infinite; }
    @keyframes hintArrow { 0%,100%{transform:translateX(0)} 50%{transform:translateX(15px)} }
    .swipe-card-area { position: relative; width: 100%; display: flex; justify-content: center; }
    .swipe-card-next { position: absolute; width: 100%; max-width: 340px; background: white; border-radius: 16px; box-shadow: 0 5px 20px rgba(0,0,0,.15); overflow: hidden; transform: scale(.92); opacity: .5; filter: blur(1px); z-index: 1; }
    .swipe-card { position: relative; width: 100%; max-width: 340px; background: white; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,.2); cursor: grab; user-select: none; overflow: hidden; z-index: 2; touch-action: pan-y; }
    .swipe-card-img { width: 100%; height: 220px; object-fit: contain; background: #f8f9fa; display: block; }
    .swipe-card-body { padding: 16px 20px 20px; text-align: center; }
    .swipe-card-desc { margin: 0; color: #555; line-height: 1.5; font-size: 15px; }
    .swipe-overlay { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; border-radius: 16px; pointer-events: none; z-index: 10; transition: opacity .15s; }
    .swipe-overlay-yes { background: rgba(74,222,128,.3); border: 4px solid rgba(74,222,128,.7); }
    .swipe-overlay-no { background: rgba(248,113,113,.3); border: 4px solid rgba(248,113,113,.7); }
    .swipe-overlay-label { font-size: 38px; font-weight: 900; padding: 12px 28px; border-radius: 12px; background: rgba(255,255,255,.95); }
    .swipe-overlay-label.yes { color: #16a34a; border: 4px solid #4ade80; }
    .swipe-overlay-label.no { color: #dc2626; border: 4px solid #f87171; }
    .swipe-progress { text-align: center; margin: 12px 0 6px; font-weight: 600; color: white; font-size: 14px; }
    .swipe-bar { width: 100%; height: 8px; background: rgba(255,255,255,.15); border-radius: 4px; margin-bottom: 12px; overflow: hidden; }
    .swipe-bar-fill { height: 100%; background: linear-gradient(90deg,#E9A23B,#f59e0b); transition: width .3s; border-radius: 4px; }
    .swipe-actions { display: flex; gap: 15px; justify-content: center; margin-top: 8px; }
    .swipe-btn { padding: 12px 28px; border: none; border-radius: 50px; font-size: 15px; font-weight: 600; cursor: pointer; font-family: var(--font); transition: transform .15s, opacity .15s; }
    .swipe-btn:active { transform: scale(.95); }
    .swipe-btn:disabled { opacity: .4; cursor: not-allowed; }
    .swipe-btn-no { background: rgba(255,255,255,.15); color: white; border: 1px solid rgba(255,255,255,.3); }
    .swipe-btn-yes { background: linear-gradient(135deg,#ffdd27,#f59e0b); color: #2d0a5a; }
    .swipe-undo { background: rgba(255,255,255,.1); border: 1px solid rgba(255,255,255,.4); color: white; padding: 5px 12px; border-radius: 6px; font-size: 12px; cursor: pointer; font-family: var(--font); margin-bottom: 4px; }

    /* --- Battle phase --- */
    .battle-phase { width: 100%; max-width: 400px; display: flex; flex-direction: column; gap: 12px; justify-content: center; height: 100%; }
    .battle-title { text-align: center; font-size: 20px; font-weight: 700; color: white; margin-bottom: 2px; }
    .battle-sub { text-align: center; font-size: 14px; color: rgba(255,255,255,.7); margin-bottom: 8px; }
    .battle-card { background: white; border-radius: 16px; padding: 16px; cursor: pointer; border: 3px solid transparent; transition: all .2s; box-shadow: 0 4px 15px rgba(0,0,0,.1); }
    .battle-card:hover { border-color: #5e17eb; transform: scale(1.02); box-shadow: 0 8px 25px rgba(94,23,235,.2); }
    .battle-card-img { width: 100%; height: 100px; object-fit: contain; border-radius: 12px; margin-bottom: 10px; background: #f8f9fa; display: block; }
    .battle-card-desc { margin: 0; color: #555; line-height: 1.4; font-size: 14px; text-align: center; }
    .battle-vs { text-align: center; font-size: 18px; font-weight: 700; color: white; }

    /* --- Reveal phase --- */
    .reveal-phase { width: 100%; max-width: 420px; display: flex; flex-direction: column; align-items: stretch; justify-content: center; height: 100%; position: relative; overflow: hidden; padding: 20px 0; text-align: center; }
    .reveal-img { width: 160px; height: 160px; border-radius: 20px; object-fit: contain; background: white; box-shadow: 0 10px 40px rgba(0,0,0,.3); margin: 0 auto 24px; animation: revealPop .5s cubic-bezier(.34,1.56,.64,1); }
    @keyframes revealPop { 0%{transform:scale(0);opacity:0} 100%{transform:scale(1);opacity:1} }
    .reveal-badge { padding: 8px 20px; background: linear-gradient(135deg,#9333EA,#7C3AED); border-radius: 20px; color: white; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; margin: 0 auto 12px; display: inline-block; align-self: center; }
    .reveal-name { font-size: 28px; font-weight: 700; color: white; margin-bottom: 10px; text-align: center; }
    .reveal-superpower { font-size: 15px; color: rgba(255,255,255,.8); text-align: center; line-height: 1.6; margin-bottom: 28px; max-width: 360px; }
    .reveal-cta { display: flex; align-items: center; justify-content: center; padding: 14px 40px; border-radius: 32px; border: none; background: linear-gradient(135deg,#ffdd27,#f59e0b,#d97706); color: #2d0a5a; font-size: 16px; font-weight: 700; font-family: var(--font); cursor: pointer; text-decoration: none; transition: transform .25s, box-shadow .25s; box-shadow: 0 4px 24px rgba(233,162,59,.35); width: 100%; }
    .reveal-cta:hover { transform: scale(1.05); box-shadow: 0 8px 32px rgba(233,162,59,.5); }
    .reveal-links-btn { margin-top: 16px; display: flex; align-items: center; justify-content: center; padding: 14px 40px; border-radius: 32px; border: 2px solid rgba(255,255,255,.25); background: rgba(255,255,255,.08); color: rgba(255,255,255,.6); font-size: 16px; font-weight: 600; cursor: pointer; font-family: var(--font); transition: all .25s cubic-bezier(.16,1,.3,1); text-decoration: none; width: 100%; }
    .reveal-links-btn:hover { background: rgba(255,255,255,.15); border-color: rgba(255,255,255,.4); color: rgba(255,255,255,.8); }
    .confetti-piece { position: absolute; top: -20px; border-radius: 2px; animation: confettiFall var(--dur) ease-out var(--delay) forwards; }
    @keyframes confettiFall { 0%{transform:translateY(0) rotate(0deg);opacity:1} 100%{transform:translateY(100vh) rotate(720deg);opacity:0} }

    @media (max-width: 480px) {
      .ei-title { font-size: 24px; }
      .ei-text { font-size: 15px; }
      .ei-cta { padding: 14px 40px; font-size: 16px; }
      .swipe-card-img { height: 180px; }
      .battle-card-img { height: 80px; }
    }

    /* Coming Soon / Interest Form */
    .link-card.coming-soon {
      cursor: pointer;
      position: relative;
    }

    .coming-soon-badge {
      background: var(--accent);
      color: #1a1a1a;
      font-size: 9px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      padding: 5px 10px;
      border-radius: 4px;
      margin-right: 14px;
      flex-shrink: 0;
      line-height: 1.4;
      text-align: center;
      white-space: pre-line;
    }

    .interest-form {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s cubic-bezier(0.16, 1, 0.3, 1),
                  padding 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      background: var(--card-bg);
      border-radius: 0 0 var(--card-radius) var(--card-radius);
      margin-top: -6px;
      margin-bottom: 12px;
      padding: 0 20px;
    }

    .interest-form.open {
      max-height: 400px;
      padding: 16px 20px 20px;
      border: 1px solid rgba(0,0,0,0.06);
      border-top: none;
    }

    .interest-form input,
    .interest-form textarea {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      font-family: var(--font);
      margin-bottom: 8px;
      color: #1a1a1a;
      background: #fafafa;
      transition: border-color 0.15s;
    }

    .interest-form input:focus,
    .interest-form textarea:focus {
      outline: none;
      border-color: var(--accent);
      background: #fff;
    }

    .interest-form textarea {
      resize: vertical;
      min-height: 50px;
    }

    .interest-form button {
      width: 100%;
      padding: 11px;
      border: none;
      border-radius: 8px;
      background: var(--accent);
      color: #1a1a1a;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      font-family: var(--font);
      transition: opacity 0.2s, transform 0.2s;
    }

    .interest-form button:hover {
      opacity: 0.9;
      transform: scale(1.01);
    }

    .interest-form button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .form-success {
      text-align: center;
      padding: 12px 0;
      color: #16a34a;
      font-weight: 600;
      font-size: 14px;
    }

    .form-error {
      text-align: center;
      padding: 8px 0 0;
      color: #ef4444;
      font-size: 13px;
    }

    /* Responsive */
    @media (max-width: 480px) {
      .profile-name {
        font-size: 24px;
      }
      .profile-bio {
        font-size: 14px;
      }
      .avatar-hero {
        max-width: 320px;
      }
    }
  </style>
</head>
<body>
  <div class="preloader" id="preloader"><div class="preloader-spinner"></div></div>

  <!-- Essence Flow Overlay (intro â†’ swipe â†’ battle â†’ reveal) -->
  <div class="essence-overlay" id="essenceOverlay">
    <div id="essenceContent"></div>
  </div>

  <div class="share-toast" id="shareToast"></div>
  <main class="container">
    <section class="profile" id="profile"></section>
    <section class="links-container" id="linksContainer"></section>
    <footer class="footer" id="footer"></footer>
  </main>

  <script src="config.js"></script>
  <script>
    // Social media SVG icons
    const SOCIAL_ICONS = {
      instagram: '<svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>',
      twitter: '<svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>',
      youtube: '<svg viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 00-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 00.502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 002.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 002.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>',
      tiktok: '<svg viewBox="0 0 24 24"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg>',
      facebook: '<svg viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>',
      linkedin: '<svg viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>',
      email: '<svg viewBox="0 0 24 24"><path d="M1.5 8.67v8.58a3 3 0 003 3h15a3 3 0 003-3V8.67l-8.928 5.493a3 3 0 01-3.144 0L1.5 8.67z"/><path d="M22.5 6.908V6.75a3 3 0 00-3-3h-15a3 3 0 00-3 3v.158l9.714 5.978a1.5 1.5 0 001.572 0L22.5 6.908z"/></svg>',
      website: '<svg viewBox="0 0 24 24"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm6.918 6h-3.215c-.354-1.457-.854-2.78-1.488-3.878A8.037 8.037 0 0118.918 8zM12 4.04c.87 1.07 1.566 2.376 2.003 3.96H9.997c.437-1.584 1.134-2.89 2.003-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.678a20.3 20.3 0 000 4H4.26zm.822 2h3.215c.354 1.457.854 2.78 1.488 3.878A8.037 8.037 0 015.082 16zM8.297 8H5.082a8.037 8.037 0 014.703-3.878C9.151 5.22 8.651 6.543 8.297 8zM12 19.96c-.87-1.07-1.566-2.376-2.003-3.96h4.006c-.437 1.584-1.134 2.89-2.003 3.96zM14.34 14H9.66a18.24 18.24 0 010-4h4.68a18.24 18.24 0 010 4zm.875 5.878c.634-1.098 1.134-2.421 1.488-3.878h3.215a8.037 8.037 0 01-4.703 3.878zM16.062 14a20.3 20.3 0 000-4h3.678c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.678z"/></svg>',
      spotify: '<svg viewBox="0 0 24 24"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>',
      whatsapp: '<svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>',
      snapchat: '<svg viewBox="0 0 24 24"><path d="M12.206.793c.99 0 4.347.276 5.93 3.821.529 1.193.403 3.219.299 4.847l-.003.06c-.012.18-.022.345-.03.51.075.045.203.09.401.09.3-.016.659-.12.922-.214.095-.034.19-.06.284-.076.378-.054.613.108.729.217.204.186.328.456.328.73 0 .45-.359.735-.524.82-.165.089-.353.165-.52.229-.191.074-.399.14-.502.178-.172.064-.22.097-.274.178-.027.04-.054.085-.076.136-.066.158-.054.494-.006.776.046.282.135.485.372.55.078.021.164.04.262.064 1.091.27 1.861.605 2.273.98.269.243.379.519.373.792-.004.229-.105.462-.31.687-.455.497-1.358.895-2.685 1.177-.164.035-.188.127-.21.226-.021.098-.05.226-.168.352-.133.142-.374.221-.7.227-1.24.018-2.165-.413-2.942-.814-.507-.261-.96-.497-1.375-.497-.402 0-.84.23-1.346.497-.82.422-1.835.858-3.139.814-.355-.016-.582-.09-.74-.227-.118-.126-.147-.254-.168-.352-.024-.099-.046-.191-.21-.226-1.326-.282-2.23-.68-2.684-1.177-.205-.226-.307-.459-.31-.687-.006-.273.103-.549.372-.792.413-.375 1.183-.71 2.273-.98.098-.024.184-.043.263-.064.237-.065.325-.268.371-.55.049-.282.06-.618-.005-.776a.662.662 0 00-.076-.136c-.054-.081-.102-.114-.274-.178a5.873 5.873 0 01-.502-.178 3.29 3.29 0 01-.52-.229c-.165-.085-.523-.37-.523-.82 0-.275.124-.545.328-.73.116-.11.35-.271.729-.217.093.016.189.041.284.076.263.094.622.23.922.214.198 0 .326-.045.4-.09a8.167 8.167 0 01-.032-.57c-.104-1.628-.23-3.654.3-4.847C7.853 1.069 11.216.793 12.206.793z"/></svg>'
    };

    // Listen for config from admin panel (preview mode)
    let activeConfig = null;
    window.addEventListener('message', (e) => {
      if (e.origin !== window.location.origin) return;
      if (e.data && e.data.type === 'linktree-preview') {
        activeConfig = e.data.config;
        render(activeConfig);
      }
    });

    function getConfig() {
      return activeConfig || (typeof SITE_CONFIG !== 'undefined' ? SITE_CONFIG : null);
    }

    function esc(str) {
      const d = document.createElement('div');
      d.textContent = str || '';
      return d.innerHTML;
    }

    function applyTheme(theme) {
      const root = document.documentElement;
      if (theme.background) {
        if (theme.background.type === 'gradient' && theme.background.colors) {
          const stops = theme.background.colors.map((c, i) =>
            `${c} ${Math.round((i / (theme.background.colors.length - 1)) * 100)}%`
          ).join(', ');
          document.body.style.background = `linear-gradient(${theme.background.angle || 180}deg, ${stops})`;
          document.body.style.backgroundAttachment = 'fixed';
        } else if (theme.background.type === 'solid') {
          document.body.style.background = theme.background.colors[0] || '#6c3bf5';
        }
      }
      root.style.setProperty('--accent', theme.accent || '#FFD700');
      root.style.setProperty('--name-color', theme.nameColor || theme.accent || '#FFD700');
      root.style.setProperty('--bio-color', theme.bioColor || '#ffffff');
      root.style.setProperty('--card-bg', theme.cardBackground || '#ffffff');
      root.style.setProperty('--card-text', theme.cardText || '#1a1a1a');
      root.style.setProperty('--card-radius', theme.cardBorderRadius || '12px');
      root.style.setProperty('--card-hover-scale', theme.cardHoverScale || '1.03');
      root.style.setProperty('--section-title-color', theme.sectionTitleColor || theme.accent || '#FFD700');
      root.style.setProperty('--social-icon-color', theme.socialIconColor || theme.accent || '#FFD700');
      if (theme.font) {
        root.style.setProperty('--font', theme.font);
        document.body.style.fontFamily = theme.font;
      }
      // Animated gradient
      if (theme.background && theme.background.type === 'gradient' && theme.background.animated !== false) {
        document.body.classList.add('animated-bg');
      } else {
        document.body.classList.remove('animated-bg');
      }
    }

    function renderProfile(config) {
      const el = document.getElementById('profile');
      const p = config.profile;
      let photoHTML = '';

      if (p.photo) {
        if (p.photoStyle === 'hero') {
          photoHTML = `<div class="avatar-hero"><img src="${esc(p.photo)}" alt="${esc(p.name)}" onerror="this.parentElement.style.display='none'"></div>`;
        } else {
          photoHTML = `<div class="avatar-circle"><img src="${esc(p.photo)}" alt="${esc(p.name)}" onerror="this.parentElement.style.display='none'"></div>`;
        }
      }

      let socialIcons = '';
      if (config.social && config.social.length) {
        socialIcons = config.social.map(s => {
          const svg = SOCIAL_ICONS[s.platform] || SOCIAL_ICONS.website;
          return `<a href="${s.url}" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="${s.label || s.platform}" title="${s.label || s.platform}">${svg}</a>`;
        }).join('');
      }

      const shareBtn = `
        <button class="share-btn" onclick="shareProfile()">
          <svg viewBox="0 0 24 24"><path d="M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11a2 2 0 01-2 2H6a2 2 0 01-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3a2 2 0 012 2z"/></svg>
          Share
        </button>`;

      el.innerHTML = `
        ${photoHTML}
        <h1 class="profile-name">${esc(p.name)}</h1>
        <p class="profile-bio">${esc(p.bio)}</p>
        <div class="social-share-row">
          ${socialIcons}
          ${shareBtn}
        </div>
      `;
    }

    function renderLinks(config) {
      const el = document.getElementById('linksContainer');
      let html = '';
      let linkIndex = 0;

      (config.sections || []).forEach(section => {
        if (section.title) {
          html += `<h2 class="section-title link-animate" data-index="${linkIndex}">${section.title}</h2>`;
          linkIndex++;
        }

        (section.links || []).forEach(link => {
          if (!link.enabled) return;
          const hasThumb = link.thumbnail ? 'has-thumb' : '';
          const thumbHTML = link.thumbnail
            ? `<img class="link-thumb" src="${esc(link.thumbnail)}" alt="${esc(link.title)}" loading="lazy" onerror="this.remove()">`
            : '';

          if (link.type === 'coming-soon') {
            const formId = 'form-' + linkIndex;
            html += `
              <div class="link-card coming-soon ${hasThumb} link-animate" data-index="${linkIndex}"
                   onclick="toggleInterestForm('${formId}')">
                ${thumbHTML}
                <span class="link-title">${esc(link.title)}</span>
                <span class="coming-soon-badge">Coming Soon
Express Interest</span>
              </div>
              <div class="interest-form" id="${formId}">
                <input type="text" placeholder="Your name" id="${formId}-name" required>
                <input type="email" placeholder="Your email" id="${formId}-email" required>
                <textarea placeholder="Anything you'd like us to know? (optional)" id="${formId}-msg" rows="2"></textarea>
                <button onclick="event.stopPropagation();submitInterest('${formId}', '${esc(link.title)}')" id="${formId}-btn">
                  Notify Me
                </button>
                <div id="${formId}-status"></div>
              </div>`;
          } else {
            html += `
              <a href="${esc(link.url)}" target="_blank" rel="noopener noreferrer"
                 class="link-card ${hasThumb} link-animate" data-index="${linkIndex}">
                ${thumbHTML}
                <span class="link-title">${esc(link.title)}</span>
              </a>`;
          }
          linkIndex++;
        });
      });

      el.innerHTML = html;

      // Staggered entrance animation
      requestAnimationFrame(() => {
        const items = el.querySelectorAll('.link-animate');
        items.forEach((item, i) => {
          const delay = 0.45 + (i * 0.07);
          item.style.animationDelay = `${delay}s`;
          item.classList.add('visible');
        });
      });
    }

    function renderSEO(config) {
      if (config.seo) {
        if (config.seo.title) document.title = config.seo.title;
        const descMeta = document.querySelector('meta[name="description"]');
        if (descMeta && config.seo.description) descMeta.content = config.seo.description;
        const ogTitle = document.querySelector('meta[property="og:title"]');
        if (ogTitle) ogTitle.content = config.seo.title || config.profile.name;
        const ogDesc = document.querySelector('meta[property="og:description"]');
        if (ogDesc) ogDesc.content = config.seo.description || config.profile.bio;
      }
    }

    function renderFooter(config) {
      const el = document.getElementById('footer');
      if (config.footer && config.footer.show && config.footer.text) {
        el.textContent = config.footer.text;
        el.style.display = 'block';
      } else {
        el.style.display = 'none';
      }
    }

    function render(config) {
      if (!config) return;
      applyTheme(config.theme || {});
      renderProfile(config);
      renderLinks(config);
      renderSEO(config);
      renderFooter(config);
    }

    // Initial render
    render(getConfig());

    // --- Supabase Config (for interest forms) ---
    const SUPABASE_URL = 'https://wiwlydjvpwvlosfojdbz.supabase.co';
    const SUPABASE_KEY = 'sb_publishable_HdoH-muE7XTiA5_W6FMWUQ_VT4R_XDw';

    function toggleInterestForm(formId) {
      const form = document.getElementById(formId);
      if (form) form.classList.toggle('open');
    }

    async function submitInterest(formId, itemTitle) {
      const name = document.getElementById(formId + '-name').value.trim();
      const email = document.getElementById(formId + '-email').value.trim();
      const msg = document.getElementById(formId + '-msg').value.trim();
      const btn = document.getElementById(formId + '-btn');
      const status = document.getElementById(formId + '-status');

      if (!name || !email) {
        status.innerHTML = '<div class="form-error">Please enter your name and email.</div>';
        return;
      }
      if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        status.innerHTML = '<div class="form-error">Please enter a valid email.</div>';
        return;
      }

      btn.disabled = true;
      btn.textContent = 'Submitting...';
      status.innerHTML = '';

      try {
        const res = await fetch(SUPABASE_URL + '/rest/v1/interest_submissions', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'apikey': SUPABASE_KEY,
            'Authorization': 'Bearer ' + SUPABASE_KEY,
            'Prefer': 'return=minimal'
          },
          body: JSON.stringify({
            name: name,
            email: email,
            item_title: itemTitle,
            message: msg || null
          })
        });

        if (res.ok) {
          const form = document.getElementById(formId);
          form.innerHTML = '<div class="form-success">Thanks ' + esc(name) + '! We\'ll keep you in the loop.</div>';
        } else {
          throw new Error('Submission failed');
        }
      } catch (e) {
        btn.disabled = false;
        btn.textContent = 'Notify Me';
        status.innerHTML = '<div class="form-error">Something went wrong. Please try again.</div>';
      }
    }

    // --- Analytics Tracking (localStorage + Supabase) ---
    function trackView() {
      try {
        const views = JSON.parse(localStorage.getItem('linktree_views') || '[]');
        views.push(new Date().toISOString());
        if (views.length > 10000) views.splice(0, views.length - 10000);
        localStorage.setItem('linktree_views', JSON.stringify(views));
      } catch (e) {}
      // Also send to Supabase
      fetch(SUPABASE_URL + '/rest/v1/page_views', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'apikey': SUPABASE_KEY,
          'Authorization': 'Bearer ' + SUPABASE_KEY,
          'Prefer': 'return=minimal'
        },
        body: JSON.stringify({
          referrer: document.referrer || null,
          user_agent: navigator.userAgent || null
        })
      }).catch(() => {});
    }

    function trackClick(title, url) {
      try {
        const clicks = JSON.parse(localStorage.getItem('linktree_clicks') || '[]');
        clicks.push({ title, url, ts: new Date().toISOString() });
        if (clicks.length > 10000) clicks.splice(0, clicks.length - 10000);
        localStorage.setItem('linktree_clicks', JSON.stringify(clicks));
      } catch (e) {}
      // Also send to Supabase
      fetch(SUPABASE_URL + '/rest/v1/link_clicks', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'apikey': SUPABASE_KEY,
          'Authorization': 'Bearer ' + SUPABASE_KEY,
          'Prefer': 'return=minimal'
        },
        body: JSON.stringify({
          link_title: title,
          link_url: url || null,
          referrer: document.referrer || null,
          user_agent: navigator.userAgent || null
        })
      }).catch(() => {});
    }

    // Track page view (skip if in preview iframe)
    if (window === window.top) {
      trackView();
    }

    // Track link clicks via event delegation
    document.getElementById('linksContainer').addEventListener('click', (e) => {
      const card = e.target.closest('.link-card');
      if (card && window === window.top) {
        const title = card.querySelector('.link-title')?.textContent || '';
        const url = card.href || '';
        trackClick(title, url);
      }
    });

    // --- Ripple Effect ---
    document.getElementById('linksContainer').addEventListener('mousedown', (e) => {
      const card = e.target.closest('.link-card');
      if (!card) return;
      const ripple = document.createElement('span');
      ripple.classList.add('ripple-circle');
      const rect = card.getBoundingClientRect();
      ripple.style.left = (e.clientX - rect.left) + 'px';
      ripple.style.top = (e.clientY - rect.top) + 'px';
      card.appendChild(ripple);
      ripple.addEventListener('animationend', () => ripple.remove());
    });

    // --- Share Button ---
    function shareProfile() {
      const cfg = getConfig();
      const url = window.location.href;
      if (navigator.share) {
        navigator.share({
          title: cfg?.profile?.name || 'My Links',
          text: cfg?.profile?.bio || '',
          url: url
        }).catch(() => {});
      } else if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(url).then(() => {
          showShareToast('Link copied to clipboard!');
        }).catch(() => {
          fallbackCopy(url);
        });
      } else {
        fallbackCopy(url);
      }
    }

    function fallbackCopy(text) {
      const ta = document.createElement('textarea');
      ta.value = text;
      ta.style.cssText = 'position:fixed;opacity:0';
      document.body.appendChild(ta);
      ta.select();
      try {
        document.execCommand('copy');
        showShareToast('Link copied to clipboard!');
      } catch {
        showShareToast('URL: ' + text);
      }
      ta.remove();
    }

    function showShareToast(msg) {
      const t = document.getElementById('shareToast');
      t.textContent = msg;
      t.classList.add('visible');
      setTimeout(() => t.classList.remove('visible'), 2500);
    }

    // ====== ESSENCE FLOW ENGINE ======
    const ARCHETYPES = [
      { name:"Radiant Rebel", description:"You are the spark who shakes things up â€” a fire with a heartbeat, designed to disrupt what's false and awaken what's real.", image:"radiant-rebel.webp", superpower:"You ignite courage in the quiet. You say what others won't and move like fire through what feels stuck." },
      { name:"Playful Creator", description:"The creator who brings joy to life â€” you are the color that moves, a spark dressed in creativity.", image:"playful-creator.webp", superpower:"You alchemize boredom into magic. You make joy contagious, creativity safe, and weirdness welcome." },
      { name:"Sacred Jester", description:"You are the one who reveals truth with humor and helps others feel safe being real.", image:"sacred-jester.webp", superpower:"You use laughter as a portal. You say what everyone thinks but is too afraid to speak â€” wrapped in warmth." },
      { name:"Wild Alchemist", description:"You are the alchemist who gives pain purpose â€” helping people rebirth themselves.", image:"wild-alchemist.webp", superpower:"You turn wounds into wisdom. You hold space for transformation and help people make meaning from their mess." },
      { name:"Heart Holder", description:"You are the quiet gravity â€” co-regulating rooms and the heartbeat that steadies the storm.", image:"heart-holder.webp", superpower:"You make the room breathe. Your presence alone creates safety, trust, and deep nervous system co-regulation." },
      { name:"Cosmic Connector", description:"You are the thread between worlds â€” weaving the mystical into the practical, the unseen into form.", image:"cosmic-connector.webp", superpower:"You bridge the invisible and the tangible. You give people language for what they always felt but couldn't name." },
      { name:"Compassionate Leader", description:"You are the compass in chaos â€” you make people feel seen, safe, and ready to rise.", image:"compassionate-leader.webp", superpower:"You hold the center when things shake. You make people feel seen, safe, and ready to rise." },
      { name:"Truth-Teller", description:"You are the sentence that slices through the noise â€” speaking sharp truth wrapped in unexpected tenderness.", image:"truth-teller.webp", superpower:"You cut through noise with precision. Your words land like arrows â€” sharp, clean, and deeply needed." }
    ];
    const IMG_BASE = 'assets/archetypes/';

    let ePhase = 'intro'; // intro, swipe, battle, reveal
    let eIndex = 0;
    let eSwipedRight = [];
    let eSwipeHistory = [];
    let eBattleHistory = [];
    let eDragging = false;
    let eStartX = 0;
    let eCurrentX = 0;
    let eAnimating = false;
    let eFinal = null;

    // Preload all images
    ARCHETYPES.forEach(a => { const img = new Image(); img.src = IMG_BASE + a.image; });

    function dismissOverlay() {
      const el = document.getElementById('essenceOverlay');
      if (el) { el.classList.add('hidden'); setTimeout(() => el.remove(), 700); }
      try { sessionStorage.setItem('essence_skipped','1'); } catch(e){}
    }

    // Auto-skip if already done this session
    (function(){
      try {
        if (sessionStorage.getItem('essence_skipped') === '1') {
          const el = document.getElementById('essenceOverlay');
          if (el) el.remove();
        }
      } catch(e){}
    })();

    function renderEssence() {
      const root = document.getElementById('essenceContent');
      if (!root) return;

      if (ePhase === 'intro') {
        root.innerHTML = `
          <div class="ei-inner">
            <div class="ei-sparkle">ðŸŒž</div>
            <h1 class="ei-title">Discover Your Essence</h1>
            <p class="ei-text">On my journey, I discovered something powerful â€” we all have an <strong>Essence Voice</strong>.</p>
            <p class="ei-text">It's that original song you were born to share. The version of you that feels most alive, most authentic, most magnetic.</p>
            <p class="ei-text">When you show up from this place, your impact doesn't feel like work â€” it feels like <strong>flow</strong>.</p>
            <p class="ei-text">There are <strong>8 Essence Voices</strong>. One will feel like coming home.</p>
            <p class="ei-hint">Swipe right on the ones that resonate. Left on the ones that don't.</p>
            <button class="ei-cta" onclick="startSwipe()">Let's Go</button>
            <button class="ei-skip" onclick="dismissOverlay()">Click here to skip</button>
          </div>`;
        return;
      }

      if (ePhase === 'swipe') {
        const a = ARCHETYPES[eIndex];
        if (!a) return;
        const next = ARCHETYPES[eIndex + 1];
        const pct = ((eIndex + 1) / ARCHETYPES.length * 100).toFixed(0);
        const isMobile = window.innerWidth <= 768;

        root.innerHTML = `
          <div class="swipe-phase">
            <div class="swipe-instruction">${isMobile ? 'Swipe right if this sounds like you' : 'Click the buttons or swipe'}</div>
            ${isMobile && eIndex === 0 ? '<div class="swipe-hint"><span>Swipe</span><span class="swipe-hint-arrow">â†’</span></div>' : ''}
            <div class="swipe-card-area">
              ${next ? `<div class="swipe-card-next"><img class="swipe-card-img" src="${IMG_BASE}${next.image}" alt="${next.name}"><div class="swipe-card-body"><p class="swipe-card-desc">${next.description}</p></div></div>` : ''}
              <div class="swipe-card" id="swipeCard">
                <div class="swipe-overlay swipe-overlay-yes" id="overlayYes" style="opacity:0"><span class="swipe-overlay-label yes">âœ… YES</span></div>
                <div class="swipe-overlay swipe-overlay-no" id="overlayNo" style="opacity:0"><span class="swipe-overlay-label no">âŒ NO</span></div>
                <img class="swipe-card-img" src="${IMG_BASE}${a.image}" alt="${a.name}">
                <div class="swipe-card-body"><p class="swipe-card-desc">${a.description}</p></div>
              </div>
            </div>
            <div class="swipe-progress">${eIndex+1} of ${ARCHETYPES.length} Â· ${eSwipedRight.length} resonate${eSwipedRight.length===1?'s':''}</div>
            <div class="swipe-bar"><div class="swipe-bar-fill" style="width:${pct}%"></div></div>
            ${eSwipeHistory.length ? '<div style="text-align:center"><button class="swipe-undo" onclick="swipeUndo()">â†¶ Undo</button></div>' : ''}
            ${!isMobile ? `<div class="swipe-actions"><button class="swipe-btn swipe-btn-no" onclick="animateSwipe('left')">âŒ Not Me</button><button class="swipe-btn swipe-btn-yes" onclick="animateSwipe('right')">âœ… Sounds Like Me</button></div>` : ''}
          </div>`;
        attachSwipeListeners();
        return;
      }

      if (ePhase === 'battle' && eSwipedRight.length >= 2) {
        const [a, b] = eSwipedRight;
        const isFinal = eSwipedRight.length === 2;
        root.innerHTML = `
          <div class="battle-phase">
            <div class="battle-title">${isFinal ? 'ðŸ† Final 2!' : 'Which resonates more?'}</div>
            <div class="battle-sub">${isFinal ? 'Choose the one that feels most like you' : 'Narrow down from '+eSwipedRight.length+' options'}</div>
            ${eBattleHistory.length ? '<div style="text-align:center"><button class="swipe-undo" onclick="battleUndo()">â†¶ Undo</button></div>' : ''}
            <div class="battle-card" onclick="selectBattle(0)">
              <img class="battle-card-img" src="${IMG_BASE}${a.image}" alt="${a.name}">
              <p class="battle-card-desc">${a.description}</p>
            </div>
            <div class="battle-vs">VS</div>
            <div class="battle-card" onclick="selectBattle(1)">
              <img class="battle-card-img" src="${IMG_BASE}${b.image}" alt="${b.name}">
              <p class="battle-card-desc">${b.description}</p>
            </div>
          </div>`;
        return;
      }

      if (ePhase === 'reveal' && eFinal) {
        // Confetti
        const colors = ['#ffdd27','#5e17eb','#7c3aed','#f59e0b','#10b981','#ec4899'];
        let confetti = '';
        for (let i = 0; i < 50; i++) {
          const c = colors[Math.floor(Math.random()*colors.length)];
          const left = (Math.random()*100).toFixed(1);
          const size = (8+Math.random()*8).toFixed(0);
          const dur = (2+Math.random()*2).toFixed(1);
          const delay = (Math.random()*.5).toFixed(2);
          const rot = (Math.random()*360).toFixed(0);
          confetti += `<div class="confetti-piece" style="left:${left}%;width:${size}px;height:${size}px;background:${c};transform:rotate(${rot}deg);--dur:${dur}s;--delay:${delay}s"></div>`;
        }
        root.innerHTML = `
          <div class="reveal-phase">
            ${confetti}
            <img class="reveal-img" src="${IMG_BASE}${eFinal.image}" alt="${eFinal.name}">
            <div class="reveal-badge">Your Essence</div>
            <div class="reveal-name">${eFinal.name}</div>
            <p class="reveal-superpower">${eFinal.superpower}</p>
            <a href="https://findmyflow.nichuzz.com/get-started" class="reveal-cta">Explore The Full Experience</a>
            <button class="reveal-links-btn" onclick="dismissOverlay()">Go to links</button>
          </div>`;
        return;
      }
    }

    function startSwipe() {
      ePhase = 'swipe'; eIndex = 0; eSwipedRight = []; eSwipeHistory = [];
      renderEssence();
    }

    function doSwipeRight() {
      eSwipeHistory.push({ index: eIndex, swiped: [...eSwipedRight] });
      eSwipedRight.push(ARCHETYPES[eIndex]);
      eIndex++;
      checkSwipeEnd();
    }
    function doSwipeLeft() {
      eSwipeHistory.push({ index: eIndex, swiped: [...eSwipedRight] });
      eIndex++;
      checkSwipeEnd();
    }
    function checkSwipeEnd() {
      if (eIndex >= ARCHETYPES.length) {
        if (eSwipedRight.length === 0) { eIndex = 0; eSwipedRight = []; eSwipeHistory = []; }
        else if (eSwipedRight.length === 1) { eFinal = eSwipedRight[0]; ePhase = 'reveal'; }
        else { eBattleHistory = []; ePhase = 'battle'; }
      }
      renderEssence();
    }
    function swipeUndo() {
      if (!eSwipeHistory.length) return;
      const prev = eSwipeHistory.pop();
      eIndex = prev.index; eSwipedRight = prev.swiped;
      renderEssence();
    }

    function animateSwipe(dir) {
      if (eAnimating) return;
      eAnimating = true;
      const card = document.getElementById('swipeCard');
      if (card) {
        const fly = window.innerWidth * 1.5;
        card.style.transition = 'transform .4s ease-out, opacity .4s';
        card.style.transform = `translateX(${dir==='right'?fly:-fly}px) rotate(${dir==='right'?30:-30}deg)`;
        card.style.opacity = '0';
      }
      setTimeout(() => {
        if (dir === 'right') doSwipeRight(); else doSwipeLeft();
        eAnimating = false;
      }, 400);
    }

    function attachSwipeListeners() {
      const card = document.getElementById('swipeCard');
      if (!card) return;
      const overlayYes = document.getElementById('overlayYes');
      const overlayNo = document.getElementById('overlayNo');

      card.addEventListener('touchstart', (e) => {
        if (eAnimating) return;
        eDragging = true; eStartX = e.touches[0].clientX; eCurrentX = eStartX;
      }, {passive:true});
      card.addEventListener('touchmove', (e) => {
        if (!eDragging || eAnimating) return;
        eCurrentX = e.touches[0].clientX;
        const dx = eCurrentX - eStartX;
        card.style.transform = `translateX(${dx}px) rotate(${dx*.1}deg)`;
        card.style.opacity = Math.max(.7, 1 - Math.abs(dx)/400);
        if (overlayYes) overlayYes.style.opacity = dx > 50 ? Math.min(1,(dx-50)/100) : 0;
        if (overlayNo) overlayNo.style.opacity = dx < -50 ? Math.min(1,(-dx-50)/100) : 0;
      }, {passive:true});
      card.addEventListener('touchend', () => {
        if (!eDragging || eAnimating) return;
        eDragging = false;
        const dx = eCurrentX - eStartX;
        if (Math.abs(dx) > 80) { animateSwipe(dx > 0 ? 'right' : 'left'); }
        else { card.style.transition = 'transform .3s, opacity .3s'; card.style.transform = ''; card.style.opacity = '';
          if(overlayYes)overlayYes.style.opacity=0; if(overlayNo)overlayNo.style.opacity=0;
          setTimeout(()=>{ if(card) card.style.transition=''; },300);
        }
      });
      // Mouse fallback
      card.addEventListener('mousedown', (e) => {
        if (eAnimating) return;
        eDragging = true; eStartX = e.clientX; eCurrentX = eStartX;
      });
      card.addEventListener('mousemove', (e) => {
        if (!eDragging || eAnimating) return;
        eCurrentX = e.clientX;
        const dx = eCurrentX - eStartX;
        card.style.transform = `translateX(${dx}px) rotate(${dx*.1}deg)`;
        card.style.opacity = Math.max(.7, 1 - Math.abs(dx)/400);
        if (overlayYes) overlayYes.style.opacity = dx > 50 ? Math.min(1,(dx-50)/100) : 0;
        if (overlayNo) overlayNo.style.opacity = dx < -50 ? Math.min(1,(-dx-50)/100) : 0;
      });
      card.addEventListener('mouseup', () => {
        if (!eDragging || eAnimating) return;
        eDragging = false;
        const dx = eCurrentX - eStartX;
        if (Math.abs(dx) > 80) { animateSwipe(dx > 0 ? 'right' : 'left'); }
        else { card.style.transition = 'transform .3s, opacity .3s'; card.style.transform = ''; card.style.opacity = '';
          if(overlayYes)overlayYes.style.opacity=0; if(overlayNo)overlayNo.style.opacity=0;
          setTimeout(()=>{ if(card) card.style.transition=''; },300);
        }
      });
      card.addEventListener('mouseleave', () => {
        if (!eDragging) return;
        eDragging = false;
        card.style.transition = 'transform .3s, opacity .3s'; card.style.transform = ''; card.style.opacity = '';
        if(overlayYes)overlayYes.style.opacity=0; if(overlayNo)overlayNo.style.opacity=0;
        setTimeout(()=>{ if(card) card.style.transition=''; },300);
      });
    }

    function selectBattle(idx) {
      eBattleHistory.push([...eSwipedRight]);
      const loser = eSwipedRight[idx === 0 ? 1 : 0];
      eSwipedRight = eSwipedRight.filter(a => a !== loser);
      if (eSwipedRight.length === 1) { eFinal = eSwipedRight[0]; ePhase = 'reveal'; }
      renderEssence();
    }
    function battleUndo() {
      if (!eBattleHistory.length) return;
      eSwipedRight = eBattleHistory.pop();
      renderEssence();
    }

    // Initial render
    renderEssence();

    // --- Preloader ---
    window.addEventListener('load', () => {
      setTimeout(() => {
        const pl = document.getElementById('preloader');
        if (pl) {
          pl.classList.add('fade-out');
          setTimeout(() => pl.remove(), 600);
        }
      }, 300);
    });
  </script>
</body>
</html>
